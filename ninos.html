<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardianes del Planeta - San Luis</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;700&display=swap');
        
        :root {
            --primary-color: #1d5f5a;
            --secondary-color: #38b2ac;
            --text-color: #334155;
            --white: #ffffff;
            --light-bg: #ffffff;
            --border-color: #cbd5e1;
            --border-radius: 5px; 
        }
        
        body {
            font-family: 'Ubuntu', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f8fafc;
            margin: 0;
            padding: 20px;
        }

        .calculator-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            padding: 30px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: var(--border-radius);
        }

        .logo {
            color: var(--white);
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .logo span {
            display: block;
            font-size: 16px;
            font-weight: normal;
            margin-top: 5px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
            margin-top: 0;
        }

        fieldset {
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
        }

        legend h2 {
            font-size: 1.2em;
            padding: 0 10px;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: var(--primary-color);
            font-size: 1.1em;
        }

        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 14px 12px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
            text-align: center;
            font-size: 1em;
            color: var(--text-color);
        }

        .option-btn:hover {
            background: var(--secondary-color);
            color: white;
        }

        .option-btn.selected {
            background: var(--secondary-color);
            color: white;
            font-weight: bold;
        }

        .question-tip {
            background-color: #e8f4f8;
            padding: 14px;
            border-radius: var(--border-radius);
            margin-top: 15px;
            border-left: 4px solid var(--secondary-color);
            font-size: 0.95em;
            line-height: 1.5;
        }

        button {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: var(--white);
            border: none;
            padding: 16px;
            font-size: 18px;
            border-radius: var(--border-radius);
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            font-weight: 700;
            transition: all 0.3s;
        }

        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        #results {
            margin-top: 30px;
            padding: 25px;
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            border-left: 5px solid var(--secondary-color);
        }

        .result-box {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: var(--white);
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 25px;
        }

        .hidden {
            display: none;
        }

        .game-promo {
            background-color: #e8f4f8;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 30px;
            text-align: center;
            border: 2px dashed var(--secondary-color);
        }

        .game-promo img {
            max-width: 200px;
            margin: 10px auto;
            display: block;
        }

        @media (max-width: 768px) {
            .calculator-container {
                padding: 20px;
            }
            
            .options-container {
                flex-direction: column;
            }
            
            .option-btn {
                width: 100%;
                padding: 16px 12px;
            }
            
            .question-tip {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="header">
            <div class="logo"> Kodyan HQ <span>Guardianes del Planeta</span></div>
        </div>
        
        <h1 style="text-align: center;">¬°Descubr√≠ c√≥mo cuidar San Luis!</h1>
        <p style="text-align: center; color: var(--primary-color); font-size: 1.1em;">Para ni√±os de 6 a 12 a√±os</p>
        
        <form id="carbonForm">
        
            <!-- Pregunta 1: Luces -->
            <fieldset>
                <legend><h2>En tu casa</h2></legend>
                <div class="form-group">
                    <label>1. Cuando sal√≠s de tu habitaci√≥n, ¬øqu√© hac√©s con las luces?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'luces', 'apagar')">
                            <span style="font-size: 1.2em;">üèÜ</span><br>
                            <strong>Las apago siempre</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'luces', 'aveces')">
                            <span style="font-size: 1.2em;">‚ö†Ô∏è</span><br>
                            <strong>A veces se me olvida</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'luces', 'prendidas')">
                            <span style="font-size: 1.2em;">üí°</span><br>
                            <strong>Las dejo prendidas</strong>
                        </button>
                    </div>
                    <div id="tip-luces" class="question-tip">
                        ¬°En San Luis hay 270 d√≠as de sol al a√±o! Aprovech√° la luz natural ‚òÄÔ∏è
                    </div>
                </div>
                
                <!-- Pregunta 2: Pantallas -->
                <div class="form-group">
                    <label>2. Cuando no us√°s la tele, compu o tablet, ¬øqu√© hac√©s?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'pantallas', 'apagar')">
                            <span style="font-size: 1.2em;">üîå</span><br>
                            <strong>Las apago o desenchufo</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'pantallas', 'standby')">
                            <span style="font-size: 1.2em;">üîã</span><br>
                            <strong>Las dejo en standby</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'pantallas', 'afuera')">
                            <span style="font-size: 1.2em;">üå≥</span><br>
                            <strong>Juego m√°s afuera</strong>
                        </button>
                    </div>
                    <div id="tip-pantallas" class="question-tip">
                        ¬øSab√≠as que 1 hora de tele apagada = energ√≠a para cargar tu tablet 3 veces?
                    </div>
                </div>
                
                <!-- Pregunta 3: Agua -->
                <div class="form-group">
                    <label>3. Cuando te lav√°s los dientes, ¬øcerr√°s la canilla?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'agua', 'cerrar')">
                            <span style="font-size: 1.2em;">üö∞</span><br>
                            <strong>S√≠, la cierro</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'agua', 'abierta')">
                            <span style="font-size: 1.2em;">üíß</span><br>
                            <strong>No, la dejo corriendo</strong>
                        </button>
                    </div>
                    <div id="tip-agua" class="question-tip">
                        ¬°En San Luis el agua es un tesoro! Cerrar la canilla ahorra 12 litros por minuto üí¶
                    </div>
                </div>
            </fieldset>
            
            <!-- Pregunta 4: Residuos -->
            <fieldset>
                <legend><h2>Tus h√°bitos</h2></legend>
                <div class="form-group">
                    <label>4. ¬øQu√© hac√©s con las botellas o cajas vac√≠as?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'residuos', 'manualidades')">
                            <span style="font-size: 1.2em;">‚úÇÔ∏è</span><br>
                            <strong>Hago manualidades</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'residuos', 'reciclar')">
                            <span style="font-size: 1.2em;">‚ôªÔ∏è</span><br>
                            <strong>Las reciclo</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'residuos', 'basura')">
                            <span style="font-size: 1.2em;">üóëÔ∏è</span><br>
                            <strong>Las tiro a la basura</strong>
                        </button>
                    </div>
                    <div id="tip-residuos" class="question-tip">
                        ¬øSab√≠as que pod√©s hacer arte con materiales reciclados? ¬°Es divertido y ayuda al planeta! Empez√° con algo simple como decorar una caja. ‚ôªÔ∏è
                    </div>
                </div>
                
                <!-- Pregunta 5: Comida -->
                <div class="form-group">
                    <label>5. Si no te gusta algo de tu comida, ¬øqu√© hac√©s?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'comida', 'compartir')">
                            <span style="font-size: 1.2em;">üê∂</span><br>
                            <strong>Se lo doy a mi mascota</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'comida', 'guardar')">
                            <span style="font-size: 1.2em;">üßä</span><br>
                            <strong>Lo guardo para m√°s tarde</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'comida', 'tirar')">
                            <span style="font-size: 1.2em;">üóëÔ∏è</span><br>
                            <strong>Lo tiro</strong>
                        </button>
                    </div>
                    <div id="tip-comida" class="question-tip">
                        1 plato de comida desperdiciado = energ√≠a para cargar 5 celulares üì±
                    </div>
                </div>
                
                <!-- Pregunta 6: Plantas en casa -->
                <div class="form-group">
                    <label>6. ¬øTen√©s plantas en tu casa?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'plantas_casa', 'muchas')">
                            <span style="font-size: 1.2em;">üåø</span><br>
                            <strong>S√≠, muchas</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'plantas_casa', 'algunas')">
                            <span style="font-size: 1.2em;">üå±</span><br>
                            <strong>Algunas</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'plantas_casa', 'ninguna')">
                            <span style="font-size: 1.2em;">üè†</span><br>
                            <strong>Ninguna</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'plantas_casa', 'gustaria_tener')">
                            <span style="font-size: 1.2em;">üíö</span><br>
                            <strong>Me gustar√≠a tener</strong>
                        </button>
                    </div>
                    <div id="tip-plantas_casa" class="question-tip">
                        ¬°Las plantas purifican el aire y alegran tu hogar! üåø‚ú®
                    </div>
                </div>
            </fieldset>
            
            <!-- Pregunta 7: Juegos -->
            <fieldset>
                <legend><h2>Tus juegos</h2></legend>
                <div class="form-group">
                    <label>7. ¬øCon qu√© te gusta jugar m√°s?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'juegos', 'afuera')">
                            <span style="font-size: 1.2em;">üèÄ</span><br>
                            <strong>Juegos afuera</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'juegos', 'mesa')">
                            <span style="font-size: 1.2em;">üß©</span><br>
                            <strong>Juegos de mesa</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'juegos', 'pantallas')">
                            <span style="font-size: 1.2em;">üéÆ</span><br>
                            <strong>Videojuegos</strong>
                        </button>
                    </div>
                    <div id="tip-juegos" class="question-tip">
                        ¬øSab√≠as que en el Parque de las Naciones hay juegos divertidos? üå≥
                    </div>
                </div>
            </fieldset>
            
            <!-- Pregunta 8: Restos de frutas/verduras -->
            <fieldset>
                <div class="form-group">
                    <label>8. ¬øQu√© hac√©s con los restos de frutas o verduras?</label>
                    <div class="options-container">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'restos_comida', 'comer_todo')">
                            <span style="font-size: 1.2em;">ü•ó</span><br>
                            <strong>Los como todo (no dejo restos)</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'restos_comida', 'compost')">
                            <span style="font-size: 1.2em;">‚ôªÔ∏è</span><br>
                            <strong>Los uso para compost (abono para plantas)</strong>
                        </button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'restos_comida', 'tirar_basura')">
                            <span style="font-size: 1.2em;">üóëÔ∏è</span><br>
                            <strong>Los tiro a la basura</strong>
                        </button>
                    </div>
                    <div id="tip-restos_comida" class="question-tip">
                        ¬°Los restos de banana y c√°scara de huevo son oro para las plantas!
                    </div>
                </div>
            </fieldset>
            
            <button type="button" id="calculateBtn" onclick="calculateResults()">VER MI IMPACTO</button>
        </form>
        
        <div id="results" class="hidden">
            <h2 style="text-align: center;">¬°Tu contribuci√≥n hoy!</h2>
            <div class="result-box">
                <p id="result-message" style="font-size: 1.2em;">Gracias a vos, hoy hay m√°s:</p>
                <ul id="result-list" style="text-align: left; margin: 20px 0; padding-left: 20px; font-size: 1.1em;">
                    <!-- Se llena din√°micamente -->
                </ul>
                <p id="result-comparison" style="font-style: italic; margin-top: 15px; font-size: 1.1em;">¬°Sos un Guardi√°n del Planeta! üåé</p>
            </div>
            
            <div class="tips">
                <h3 style="color: var(--primary-color);">üåç Consejos personalizados para vos:</h3>
                <ul id="personal-tips" style="list-style-type: none; padding-left: 0;">
                    <!-- Se llena din√°micamente -->
                </ul>
            </div>
          </div>
    </div>

    <script>
        // Respuestas del usuario
        const userResponses = {};
        
        // Tips personalizados por respuesta
        const tipsPersonalizados = {
            luces: {
                apagar: "¬°Segu√≠ as√≠! Apagar las luces ayuda mucho. ¬øSab√≠as que en San Luis hay talleres de eficiencia energ√©tica para ni√±os?",
                aveces: "Pod√©s poner un dibujo recordatorio en la puerta de tu habitaci√≥n. ¬°En muchas escuelas de la provincia lo hicieron y funciona!",
                prendidas: "Prob√° apagarlas hoy al salir. ¬°Es como encontrar una moneda de $10 por cada luz apagada! üí∞"
            },
            pantallas: {
                apagar: "¬°Perfecto! La energ√≠a que ahorraste podr√≠a cargar 10 celulares. ¬°Impresionante!",
                standby: "Los aparatos en standby gastan energ√≠a como 10 helados al a√±o. ¬°Desenchufalos! üç¶",
                afuera: "¬°Genial! En San Luis hay m√°s de 20 plazas para jugar. ¬øConoc√©s la m√°s cercana a tu casa?"
            },
            agua: {
                cerrar: "¬°Bien hecho! El agua que ahorraste hoy equivale a 20 botellas de agua.",
                abierta: "¬øProb√°s cerrar la canilla hoy? ¬°Cada minuto ahorrado salva mucha agua! üíß"
            },
            residuos: {
                manualidades: "¬°Creativo! En muchos centros culturales de San Luis hacen talleres con materiales reciclados.",
                reciclar: "¬°Excelente! Si toda tu clase reciclara, podr√≠an armar m√°s de 10 autitos de botellas en un mes.",
                basura: "¬øProb√°s aplastar las botellas? Ocupan menos espacio. ¬°Pregunt√° en tu municipio d√≥nde hay Puntos Verdes!"
            },
            comida: {
                compartir: "¬°Qu√© bien! En San Luis hay programas que reciben donaciones de alimentos para quienes m√°s necesitan.",
                guardar: "¬°Inteligente! Guardar comida es como tener un tesoro escondido en la heladera.",
                tirar: "La pr√≥xima vez pod√©s pedir menos comida. ¬°En muchos comedores ense√±an a servir porciones justas!"
            },
            restos_comida: {
                comer_todo: "¬°Excelente! No desperdiciar comida es lo mejor para el planeta y tu salud.",
                compost: "¬°Perfecto! El compost reduce la basura y nutre la tierra. ¬°San Luis promueve el compostaje!",
                tirar_basura: "¬øSab√≠as que pod√©s hacer compost aunque vivas en departamento? Es m√°s f√°cil de lo que parece."
            },
            plantas_casa: {
                muchas: "¬°Qu√© maravilla! Tu hogar es un peque√±o pulm√≥n verde que purifica el aire üåø",
                algunas: "¬°Cada plantita cuenta! Pod√©s ir agregando m√°s poco a poco. ¬°San Luis tiene viveros con plantines!",
                ninguna: "¬øProb√°s empezar con una plantita f√°cil como un potus o una suculenta? Son muy resistentes.",
                gustaria_tener: "¬°Es un lindo proyecto! Empez√° con plantas resistentes que necesiten poco cuidado."
            },
            juegos: {
                afuera: "¬°Saludable! El aire libre de San Luis es de los m√°s limpios de Argentina. ¬°Aprovechalo!",
                mesa: "¬øHac√©s manualidades? En muchas bibliotecas y centros culturales tienen talleres creativos.",
                pantallas: "¬øSab√≠as que hay aplicaciones educativas que te ense√±an sobre ecolog√≠a? ¬°Pod√©s aprender jugando!"
            }
        };
        
        // Seleccionar opci√≥n en preguntas
        function selectOption(btn, category, value) {
            // Resetear estilos de opciones hermanas
            const siblings = btn.parentNode.querySelectorAll('.option-btn');
            siblings.forEach(sib => {
                sib.classList.remove('selected');
            });
            
            // Marcar como seleccionada
            btn.classList.add('selected');
            
            // Guardar respuesta
            userResponses[category] = value;
            
            // Actualizar tip personalizado
            updateTip(category, value);
        }
        
        // Actualizar tips seg√∫n respuesta
        function updateTip(category, value) {
            const tipElement = document.getElementById(`tip-${category}`);
            if (tipElement && tipsPersonalizados[category] && tipsPersonalizados[category][value]) {
                tipElement.innerHTML = tipsPersonalizados[category][value];
            }
        }

        // Calcular resultados con feedback personalizado
        function calculateResults() {
            const resultList = document.getElementById('result-list');
            const personalTips = document.getElementById('personal-tips');
            
            // Limpiar resultados anteriores
            resultList.innerHTML = '';
            personalTips.innerHTML = '';
            
            // Generar contribuciones basadas en respuestas
            const contributions = [];
            const tips = [];
            
            // Evaluar cada respuesta
            for (const [category, value] of Object.entries(userResponses)) {
                switch (category) {
                    case 'luces':
                        if (value === 'apagar') {
                            contributions.push("üåû 10 horas de sol aprovechadas");
                            tips.push("<li>¬°Segu√≠ apagando luces! Pod√©s hacer un cartel para tu habitaci√≥n con materiales reciclados.</li>");
                        } else {
                            contributions.push("üí° 5 bombillas apagadas potenciales");
                            tips.push("<li>Prob√° apagar 1 luz hoy. ¬°Es f√°cil! Ponele un sticker de recordatorio.</li>");
                        }
                        break;
                        
                    case 'pantallas':
                        if (value === 'afuera') {
                            contributions.push("üèÄ 1 hora de juego saludable");
                            tips.push("<li>Visit√° el parque m√°s cercano a tu casa. ¬°En San Luis hay 20 para elegir!</li>");
                        } else {
                            contributions.push("üîå 3 dispositivos potencialmente apagados");
                            tips.push("<li>¬øSab√≠as que el programa 'San Luis Digital' ense√±a a usar tecnolog√≠a de forma eco-friendly?</li>");
                        }
                        break;
                        
                    case 'agua':
                        contributions.push("üíß 20 litros de agua guardados");
                        tips.push("<li>¬øProb√°s cerrar la canilla cuando te lav√°s las manos? ¬°Ahorr√°s 5 litros cada vez!</li>");
                        break;
                        
                    case 'residuos':
                        if (value !== 'basura') {
                            contributions.push("‚ôªÔ∏è 5 materiales reciclados");
                            tips.push("<li>¬°Excelente! Separar los residuos es un superpoder ecol√≥gico. Pregunt√° en tu escuela o municipio d√≥nde llevar materiales reciclables.</li>");
                        } else {
                            tips.push("<li>¬øProb√°s empezar separando solo las botellas? Es f√°cil y hace una gran diferencia. ¬°Pod√©s decorar un tacho especial!</li>");
                        }
                        break;
                        
                    case 'restos_comida':
                        if (value === 'compost') {
                            contributions.push("üå± 3 kilos de compost creados");
                            tips.push("<li>¬°Excelente! El compostaje ayuda a reducir la basura y nutrir la tierra.</li>");
                        } else if (value === 'comer_todo') {
                            contributions.push("üçé 5 frutas aprovechadas al m√°ximo");
                            tips.push("<li>¬°Perfecto! Aprovechar toda la comida es genial para el planeta.</li>");
                        } else {
                            tips.push("<li>¬øSab√≠as que los restos de comida pueden convertirse en abono? ¬°Es m√°s f√°cil de lo que parece!</li>");
                        }
                        break;
                        
                    case 'plantas_casa':
                        if (value === 'muchas' || value === 'algunas') {
                            contributions.push("üåø 10 plantas purificando aire");
                            tips.push("<li>¬°Tus plantas est√°n haciendo el aire m√°s limpio! ¬øSab√≠as que tambi√©n ayudan a regular la temperatura?</li>");
                        } else if (value === 'gustaria_tener') {
                            contributions.push("üíö Futuro jardinero en acci√≥n");
                            tips.push("<li>¬°Empez√° con plantas resistentes como potus o suculentas! Son f√°ciles de cuidar.</li>");
                        } else {
                            tips.push("<li>¬øProb√°s empezar con una plantita? ¬°Purifican el aire y alegran cualquier espacio!</li>");
                        }
                        break;
                        
                    case 'juegos':
                        if (value === 'pantallas') {
                            tips.push("<li>¬øSab√≠as que hay aplicaciones educativas que te ense√±an sobre ecolog√≠a? ¬°Pod√©s aprender jugando!</li>");
                        }
                        break;
                }
            }
            
            // Mensaje base si no hay suficientes respuestas
            if (contributions.length === 0) {
                contributions.push("üå± Peque√±as acciones hacen grandes cambios");
                tips.push("<li>Empeza hoy con algo simple: apag√° una luz que no uses.</li>");
            }
            
            // Agregar tips generales
            tips.push("<li>üå± <strong>¬°Hac√© tu huerta!</strong> El programa <a href='https://sanluis.gov.ar/desarrollo-productivo/activa-huerta/' target='_blank'>Mi Huerta San Luis</a> te ense√±a c√≥mo.</li>");
            tips.push("<li>üö≤ <strong>Visit√° los parques:</strong> En San Luis hay m√°s de 20 espacios verdes para explorar.</li>");
            
            // Mostrar resultados
            contributions.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = item;
                li.style.margin = '10px 0';
                li.style.fontSize = '1.1em';
                resultList.appendChild(li);
            });
            
            personalTips.innerHTML = tips.join('');
            
            // Mostrar secci√≥n de resultados
            document.getElementById('results').classList.remove('hidden');
            window.scrollTo({
                top: document.getElementById('results').offsetTop,
                behavior: 'smooth'
            });
        }
               // =============================================
        // INTEGRACI√ìN SUPABASE - NINOS.HTML
        // =============================================
        const SUPABASE_CONFIG = {
            url: 'https://rrbzechsvaadttqslwed.supabase.co',
            key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyYnplY2hzdmFhZHR0cXNsd2VkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1NjQ3MDMsImV4cCI6MjA3NDE0MDcwM30.2qXULldBwTwHDnmGsd4veG5C6TMHSECNnPbPc_zRJ5A'
        };

        // Funci√≥n para guardar respuestas
        async function guardarRespuestasNinos() {
            try {
                const supabase = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.key);
                
                // Obtener ubicaci√≥n del localStorage
                const ubicacionGuardada = JSON.parse(localStorage.getItem('ubicacion') || '{}');
                
                // Preparar datos
                const datos = {
                    provincia: ubicacionGuardada.provincia || 'No especificada',
                    departamento: ubicacionGuardada.departamento || 'No especificado', 
                    localidad: ubicacionGuardada.localidad || '',
                    escuela: '',
                    
                    // Respuestas
                    luces_habitacion: userResponses.luces,
                    pantallas_apagar: userResponses.pantallas,
                    canilla_cerrar: userResponses.agua,
                    residuos_botellas: userResponses.residuos,
                    comida_sobras: userResponses.comida,
                    plantas_casa: userResponses.plantas_casa,
                    juegos_preferidos: userResponses.juegos,
                    restos_comida: userResponses.restos_comida,
                    
                    // Resultados
                    estrellas_ecologicas: document.querySelectorAll('#result-list li').length,
                    perfil_guardian: obtenerPerfilGuardian(),
                    logros_obtenidos: Array.from(document.querySelectorAll('#result-list li')).map(li => li.textContent)
                };

                // Guardar en Supabase
                const { data, error } = await supabase
                    .from('calculadora_ninos')
                    .insert([datos]);

                if (error) {
                    console.error('Error guardando datos ni√±os:', error);
                } else {
                    console.log('Datos ni√±os guardados:', data);
                }
                
            } catch (error) {
                console.error('Error inesperado ni√±os:', error);
            }
        }

        function obtenerPerfilGuardian() {
            const estrellas = document.querySelectorAll('#result-list li').length;
            if (estrellas >= 6) return 'Guard√≠an Estelar';
            if (estrellas >= 4) return 'Protector Ambiental'; 
            if (estrellas >= 2) return 'Aprendiz Ecol√≥gico';
            return 'Explorador en Camino';
        }

        // MODIFICAR FUNCI√ìN EXISTENTE - Busca la funci√≥n calculateResults() 
        // (Normalmente est√° alrededor de la l√≠nea 300-400)
        // Y REEMPLAZA solo la √∫ltima parte:

        // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è EN LA FUNCI√ìN calculateResults() EXISTENTE ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è
        // Busca donde termina la funci√≥n, justo antes de: 
        //     document.getElementById('results').classList.remove('hidden');
        //     window.scrollTo({ ... });
        // }
        
        // Y A√ëADE esto justo ANTES de las √∫ltimas l√≠neas:
        function calculateResults() {
            // ... TODO tu c√≥digo existente de calculateResults ...
            
            // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è A√ëADIR ESTO AL FINAL, ANTES de mostrar resultados ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è
            setTimeout(() => {
                guardarRespuestasNinos();
            }, 1000);
            
            // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è ESTO YA DEBER√çA EXISTIR ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è
            // Mostrar secci√≥n de resultados
            document.getElementById('results').classList.remove('hidden');
            window.scrollTo({
                top: document.getElementById('results').offsetTop,
                behavior: 'smooth'
            });
        }
    </script>
</body>
</html>
    </script>
</body>
</html>
