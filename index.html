<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Huella de Carbono - Kodyan HQ</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --koy-bg-light: #f8fafc;
            --koy-text-dark: #0f172a;
            --koy-text-medium: #334155;
            --koy-text-light: #64748b;
            --koy-primary: #28736e;
            --koy-primary-light: #38b2ac;
            --koy-highlight: #00ffd1;
            --koy-accent: #2563eb;
            --koy-border: #cbd5e1;
            --koy-card-bg: #ffffff;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, var(--koy-primary) 0%, var(--koy-primary-light) 100%);
            color: white;
            text-align: center;
            padding: 50px 20px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: var(--koy-card-bg);
            padding: 40px;
            border-radius: 20px;
            color: var(--koy-text-dark);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border: 2px solid var(--koy-highlight);
        }
        
        h1 {
            color: var(--koy-primary);
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        p {
            color: var(--koy-text-medium);
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        
        .koy-logo {
            font-size: 2.5rem;
            color: var(--koy-primary);
            margin-bottom: 20px;
        }
        
        select {
            width: 100%;
            padding: 15px;
            margin: 15px 0;
            border: 2px solid var(--koy-border);
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
            background: var(--koy-bg-light);
            color: var(--koy-text-dark);
            transition: all 0.3s ease;
        }
        
        select:focus {
            outline: none;
            border-color: var(--koy-primary);
            box-shadow: 0 0 0 3px rgba(40, 115, 110, 0.2);
        }
        
        button {
            width: 100%;
            padding: 16px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            background: var(--koy-primary);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        button:hover {
            background: var(--koy-primary-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:disabled {
            background: var(--koy-text-light);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .brand {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--koy-border);
            color: var(--koy-text-light);
            font-size: 0.9rem;
        }
        
        .brand strong {
            color: var(--koy-primary);
        }
        
        .localidad-group {
            display: none;
        }
        
        .seccion-info {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid var(--koy-primary);
            text-align: left;
        }
        
        .seccion-info h4 {
            margin: 0 0 10px 0;
            color: var(--koy-primary);
        }
        
        .seccion-info ul {
            margin: 0;
            padding-left: 20px;
            columns: 2;
            column-gap: 20px;
        }
        
        .seccion-info li {
            font-size: 11px;
            margin-bottom: 3px;
            break-inside: avoid;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .seccion-info ul {
                columns: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="koy-logo">
            <i class="fas fa-leaf"></i>
        </div>
        
        <h1>Calculadora de Huella de Carbono</h1>
        <p>¡Empecemos por tu edad y ubicación! Completá los datos para continuar</p>
        
        <select id="edad" required>
            <option value="">-- Seleccioná tu edad --</option>
            <option value="ninos">6 a 12 años</option>
            <option value="jovenes">13 a 18 años</option>
            <option value="adultos">19 años o más</option>
        </select>
        
        <select id="provincia" required>
            <option value="">-- Seleccioná tu provincia --</option>
            <option value="caba">Ciudad de Buenos Aires</option>
            <option value="buenos_aires">Buenos Aires</option>
            <option value="catamarca">Catamarca</option>
            <option value="chaco">Chaco</option>
            <option value="chubut">Chubut</option>
            <option value="cordoba">Córdoba</option>
            <option value="corrientes">Corrientes</option>
            <option value="entre_rios">Entre Ríos</option>
            <option value="formosa">Formosa</option>
            <option value="jujuy">Jujuy</option>
            <option value="la_pampa">La Pampa</option>
            <option value="la_rioja">La Rioja</option>
            <option value="mendoza">Mendoza</option>
            <option value="misiones">Misiones</option>
            <option value="neuquen">Neuquén</option>
            <option value="rio_negro">Río Negro</option>
            <option value="salta">Salta</option>
            <option value="san_juan">San Juan</option>
            <option value="san_luis">San Luis</option>
            <option value="santa_cruz">Santa Cruz</option>
            <option value="santa_fe">Santa Fe</option>
            <option value="santiago">Santiago del Estero</option>
            <option value="tierra_fuego">Tierra del Fuego</option>
            <option value="tucuman">Tucumán</option>
        </select>
        
        <select id="departamento" disabled required>
            <option value="">Primero seleccioná una provincia</option>
        </select>
        
        <div id="localidadGroup" class="localidad-group">
            <select id="localidad" disabled>
                <option value="">Seleccioná localidad</option>
            </select>
        </div>
        
        <div id="seccionInfo" class="seccion-info" style="display: none;">
            <h4>Partidos incluidos en esta sección:</h4>
            <div id="partidosList"></div>
        </div>
        
        <button id="continueBtn" onclick="irACalculadora()" disabled>
            <i class="fas fa-arrow-right"></i> CONTINUAR
        </button>
        
        <div class="brand">
            Una herramienta de <strong>Kodyan HQ</strong>
        </div>
    </div>

    <script>
        // =============================================
// INTEGRACIÓN SUPABASE - INDEX.HTML
// =============================================
const SUPABASE_CONFIG = {
    url: 'https://rrbzechsvaadttqslwed.supabase.co',
    key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyYnplY2hzdmFhZHR0cXNsd2VkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1NjQ3MDMsImV4cCI6MjA3NDE0MDcwM30.2qXULldBwTwHDnmGsd4veG5C6TMHSECNnPbPc_zRJ5A'
};

// Función para guardar la selección inicial
async function guardarSeleccionInicial(edadGrupo, ubicacion) {
    try {
        const supabase = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.key);
        
        const { data, error } = await supabase
            .from('calculadora_inicial')
            .insert([{
                edad_grupo: edadGrupo,
                provincia: ubicacion.provincia,
                departamento: ubicacion.departamento,
                localidad: ubicacion.localidad,
                user_agent: navigator.userAgent
            }]);
            
        if (error) {
            console.error('Error guardando selección inicial:', error);
        } else {
            console.log('Selección inicial guardada:', data);
        }
    } catch (error) {
        console.error('Error inesperado:', error);
    }
}

// Modificar la función existente irACalculadora()
function irACalculadora() {
    const edad = document.getElementById('edad').value;
    const provincia = document.getElementById('provincia').value;
    const departamento = document.getElementById('departamento').value;
    const localidad = document.getElementById('localidad').value || '';
    
    if (!edad || !provincia || !departamento) {
        alert("¡Completá todos los campos para continuar!");
        return;
    }
    
    // Guardar en localStorage para usar en la próxima página
    const ubicacion = {
        provincia: provincia,
        departamento: departamento,
        localidad: localidad
    };
    localStorage.setItem('ubicacion', JSON.stringify(ubicacion));
    
    // Guardar también en Supabase (en segundo plano, no bloqueante)
    guardarSeleccionInicial(edad, ubicacion);
    
    window.location.href = edad + ".html";
}
        // Mapeo completo de provincias y departamentos
        const ubicaciones = {
            caba: {
                nombre: "Ciudad de Buenos Aires",
                departamentos: [
                    "Comuna 1", "Comuna 2", "Comuna 3", "Comuna 4", "Comuna 5",
                    "Comuna 6", "Comuna 7", "Comuna 8", "Comuna 9", "Comuna 10",
                    "Comuna 11", "Comuna 12", "Comuna 13", "Comuna 14", "Comuna 15"
                ]
            },
            
            buenos_aires: {
                nombre: "Buenos Aires",
                departamentos: [
                    "Sección 1", "Sección 2", "Sección 3", "Sección 4", 
                    "Sección 5", "Sección 6", "Sección 7", "Sección 8"
                ],
                secciones: {
                    "Sección 1": ["Campana", "Escobar", "General Las Heras", "General Rodríguez", "General San Martín", "Hurlingham", "Ituzaingó", "José C. Paz", "Luján", "Malvinas Argentinas", "Marcos Paz", "Mercedes", "Merlo", "Moreno", "Morón", "Navarro", "Pilar", "San Fernando", "San Isidro", "San Miguel", "Suipacha", "Tigre", "Tres de Febrero", "Vicente López"],
                    "Sección 2": ["Arrecifes", "Baradero", "Capitán Sarmiento", "Carmen de Areco", "Colón", "Exaltación de la Cruz", "Pergamino", "Ramallo", "Rojas", "Salto", "San Andrés de Giles", "San Antonio de Areco", "San Nicolás", "San Pedro", "Zárate"],
                    "Sección 3": ["Almirante Brown", "Avellaneda", "Berazategui", "Berisso", "Brandsen", "Cañuelas", "Ensenada", "Esteban Echeverría", "Ezeiza", "Florencio Varela", "La Matanza", "Lanús", "Lobos", "Lomas de Zamora", "Magdalena", "Presidente Perón", "Punta Indio", "Quilmes", "San Vicente"],
                    "Sección 4": ["Alberti", "Bragado", "Carlos Casares", "Carlos Tejedor", "Chacabuco", "Chivilcoy", "Florentino Ameghino", "General Arenales", "General Pinto", "General Viamonte", "General Villegas", "Hipólito Yrigoyen", "Junín", "Leandro N. Alem", "Lincoln", "Nueve de Julio", "Pehuajó", "Rivadavia", "Trenque Lauquen"],
                    "Sección 5": ["Ayacucho", "Balcarce", "Castelli", "Chascomús", "Dolores", "General Alvarado", "General Belgrano", "General Guido", "General Lavalle", "General Madariaga", "General Paz", "General Pueyrredón", "La Costa", "Las Flores", "Lezama", "Lobería", "Maipú", "Mar Chiquita", "Monte", "Necochea", "Pila", "Pinamar", "Rauch", "San Cayetano", "Tandil", "Tordillo", "Villa Gesell"],
                    "Sección 6": ["Adolfo Alsina", "Adolfo Gonzales Chaves", "Bahía Blanca", "Benito Juárez", "Coronel Dorrego", "Coronel Pringles", "Coronel Rosales", "Coronel Suárez", "Daireaux", "Guaminí", "General Lamadrid", "Laprida", "Monte Hermoso", "Patagones", "Pellegrini", "Puan", "Saavedra", "Salliqueló", "Tornquist", "Tres Arroyos", "Tres Lomas", "Villarino"],
                    "Sección 7": ["Azul", "Bolívar", "General Alvear", "Olavarría", "Roque Pérez", "Saladillo", "Tapalqué", "Veinticinco de Mayo"],
                    "Sección 8": ["La Plata"]
                }
            },
            
            catamarca: {
                nombre: "Catamarca",
                departamentos: ["Ambato", "Ancasti", "Andalgalá", "Antofagasta de la Sierra", "Belén", "Capayán", "Capital", "El Alto", "Fray Mamerto Esquiú", "La Paz", "Paclín", "Pomán", "Santa María", "Santa Rosa", "Tinogasta", "Valle Viejo"]
            },
            
            chaco: {
                nombre: "Chaco",
                departamentos: ["Almirante Brown", "Bermejo", "Chacabuco", "Comandante Fernández", "Doce de Octubre", "Dos de Abril", "Fray Justo Santa María de Oro", "General Belgrano", "General Donovan", "General Güemes", "Independencia", "Libertad", "Libertador General San Martín", "Maipú", "Mayor Luis Jorge Fontana", "Nueve de Julio", "O'Higgins", "Presidencia de la Plaza", "Primero de Mayo", "Quitilipi", "San Fernando", "San Lorenzo", "Sargento Cabral", "Tapenagá", "Veinticinco de Mayo"]
            },
            
            chubut: {
                nombre: "Chubut",
                departamentos: ["Biedma", "Cushamen", "Escalante", "Florentino Ameghino", "Futaleufú", "Gaiman", "Gastre", "Languiñeo", "Mártires", "Paso de Indios", "Rawson", "Río Senguer", "Sarmiento", "Tehuelches", "Telsen"]
            },
            
            cordoba: {
                nombre: "Córdoba",
                departamentos: ["Calamuchita", "Capital", "Colón", "Cruz del Eje", "General Roca", "General San Martín", "Ischilín", "Juárez Celman", "Marcos Juárez", "Minas", "Pocho", "Presidente Roque Sáenz Peña", "Punilla", "Río Cuarto", "Río Primero", "Río Seco", "Río Segundo", "San Alberto", "San Javier", "San Justo", "Santa María", "Sobremonte", "Tercero Arriba", "Totoral", "Tulumba", "Unión"]
            },
            
            corrientes: {
                nombre: "Corrientes",
                departamentos: ["Bella Vista", "Berón de Astrada", "Capital", "Concepción", "Curuzú Cuatiá", "Empedrado", "Esquina", "General Alvear", "General Paz", "Goya", "Itatí", "Ituzaingó", "Lavalle", "Mburucuyá", "Mercedes", "Monte Caseros", "Paso de los Libres", "Saladas", "San Cosme", "San Luis del Palmar", "San Martín", "San Miguel", "San Roque", "Santo Tomé", "Sauce"]
            },
            
            entre_rios: {
                nombre: "Entre Ríos",
                departamentos: ["Colón", "Concordia", "Diamante", "Federación", "Federal", "Gualeguay", "Gualeguaychú", "Islas del Ibicuy", "La Paz", "Nogoyá", "Paraná", "San José de Feliciano", "San Salvador", "Tala", "Uruguay", "Victoria", "Villaguay"]
            },
            
            formosa: {
                nombre: "Formosa",
                departamentos: ["Bermejo", "Formosa", "Laishí", "Matacos", "Pilagás", "Pilcomayo", "Pirané", "Ramón Lista", "Patiño"]
            },
            
            jujuy: {
                nombre: "Jujuy",
                departamentos: ["Cochinoca", "Dr. Manuel Belgrano", "El Carmen", "Humahuaca", "Ledesma", "Palpalá", "Rinconada", "San Antonio", "San Pedro", "Santa Bárbara", "Santa Catalina", "Susques", "Tilcara", "Tumbaya", "Valle Grande", "Yavi"]
            },
            
            la_pampa: {
                nombre: "La Pampa",
                departamentos: ["Atreucó", "Caleu Caleu", "Capital", "Catriló", "Chalileo", "Chapaleufú", "Chical Co", "Conhelo", "Curacó", "Guatraché", "Hucal", "Lihuel Calel", "Limay Mahuida", "Loventué", "Maracó", "Puelén", "Quemú Quemú", "Rancul", "Realicó", "Toay", "Trenel", "Utracán"]
            },
            
            la_rioja: {
                nombre: "La Rioja",
                departamentos: ["Arauco", "Capital", "Castro Barros", "Chamical", "Chilecito", "Coronel Felipe Varela", "Famatina", "General Ángel V. Peñaloza", "General Belgrano", "General Juan Facundo Quiroga", "General Lamadrid", "General Ocampo", "General San Martín", "Independencia", "Rosario Vera Peñaloza", "San Blas de los Sauces", "Sanagasta", "Vicente Armando"]
            },
            
            mendoza: {
                nombre: "Mendoza",
                departamentos: ["Capital", "General Alvear", "Godoy Cruz", "Guaymallén", "Junín", "La Paz", "Las Heras", "Lavalle", "Luján de Cuyo", "Maipú", "Malargüe", "Rivadavia", "San Carlos", "San Martín", "San Rafael", "Santa Rosa", "Tunuyán", "Tupungato"]
            },
            
            misiones: {
                nombre: "Misiones",
                departamentos: ["Apóstoles", "Cainguás", "Candelaria", "Capital", "Concepción", "Eldorado", "General Manuel Belgrano", "Guaraní", "Iguazú", "Leandro N. Alem", "Libertador General San Martín", "Montecarlo", "Oberá", "San Ignacio", "San Javier", "San Pedro", "Veinticinco de Mayo"]
            },
            
            neuquen: {
                nombre: "Neuquén",
                departamentos: ["Aluminé", "Añelo", "Catán Lil", "Collón Curá", "Confluencia", "Chos Malal", "Huiliches", "Lácar", "Loncopué", "Los Lagos", "Minas", "Ñorquín", "Pehuenches", "Picún Leufú", "Picunches", "Zapala"]
            },
            
            rio_negro: {
                nombre: "Río Negro",
                departamentos: ["Adolfo Alsina", "Avellaneda", "Bariloche", "Conesa", "El Cuy", "General Roca", "Nueve de Julio", "Ñorquincó", "Pichi Mahuida", "Pilcaniyeu", "San Antonio", "Valcheta", "Veinticinco de Mayo"]
            },
            
            salta: {
                nombre: "Salta",
                departamentos: ["Anta", "Cachi", "Cafayate", "Capital", "Cerrillos", "Chicoana", "General Güemes", "General José de San Martín", "Guachipas", "Iruya", "La Caldera", "La Candelaria", "La Poma", "La Viña", "Los Andes", "Metán", "Molinos", "Orán", "Rivadavia", "Rosario de la Frontera", "Rosario de Lerma", "San Carlos", "Santa Victoria"]
            },
            
            san_juan: {
                nombre: "San Juan",
                departamentos: ["Albardón", "Angaco", "Calingasta", "Capital", "Caucete", "Chimbas", "Iglesia", "Jáchal", "Nueve de Julio", "Pocito", "Rawson", "Rivadavia", "San Martín", "Santa Lucía", "Sarmiento", "Ullum", "Valle Fértil", "Veinticinco de Mayo", "Zonda"]
            },
            
            san_luis: {
                nombre: "San Luis",
                departamentos: ["Ayacucho", "Belgrano", "Chacabuco", "Coronel Pringles", "General Pedernera", "Gobernador Dupuy", "Junín", "La Capital", "Libertador General San Martín"],
                localidades: {
                    "Ayacucho": ["Quines", "San Francisco del Monte de Oro", "Candelaria", "Lafinur", "Leandro N. Alem", "Los Cajones", "Lomas Blancas", "Río Grande", "Rincón del Carmen", "El Talita", "El Pantanillo", "Luján", "Otra"],
                    "Belgrano": ["Villa General Roca", "Nogolí", "La Calera", "Villa de la Quebrada", "Las Lagunas", "El Zapallar", "Las Chacras", "El Barrial", "Otra"],
                    "Chacabuco": ["Concarán", "Santa Rosa del Conlara", "Tilisarao", "Naschel", "Renca", "Papagayos", "Paso Grande", "Villa del Carmen", "El Recuerdo", "Otra"],
                    "Coronel Pringles": ["La Toma", "El Durazno", "Saladillo", "El Trapiche", "Riocito", "Estancia Grande", "Otra"],
                    "General Pedernera": ["Villa Mercedes", "Justo Daract", "Juan Jorba", "San José del Morro", "Juan Llerena", "Villa Reynolds", "Fraga", "La Esquina", "Alto Pelado", "Otra"],
                    "Gobernador Dupuy": ["Buena Esperanza", "Nueva Galia", "Unión", "Fortín El Patria", "Anchorena", "Batavia", "Fortuna", "Martín de Loyola", "Arizona", "Otra"],
                    "Junín": ["Santa Rosa de Conlara", "Merlo (Villa de Merlo)", "Carpintería", "Talita", "Cortaderas", "Cerro de Oro", "Piedra Blanca", "Otra"],
                    "La Capital": ["San Luis Capital", "La Punta", "El Volcán", "Balde", "Zanjitas", "La Florida", "Jarilla", "Alto Pencoso", "Juana Koslay", "Mosmota", "Salinas del Bebedero", "Otra"],
                    "Libertador General San Martín": ["San Martín", "Las Aguadas", "Las Chacras", "Potrero de los Funes", "El Rincón", "Los Molles", "Otra"]
                }
            },
            
            santa_cruz: {
                nombre: "Santa Cruz",
                departamentos: ["Corpen Aike", "Deseado", "Güer Aike", "Lago Argentino", "Lago Buenos Aires", "Magallanes", "Río Chico"]
            },
            
            santa_fe: {
                nombre: "Santa Fe",
                departamentos: ["Belgrano", "Caseros", "Castellanos", "Constitución", "Garay", "General López", "General Obligado", "Iriondo", "La Capital", "Las Colonias", "Nueve de Julio", "Rosario", "San Cristóbal", "San Javier", "San Jerónimo", "San Justo", "San Lorenzo", "San Martín", "Vera"]
            },
            
            santiago: {
                nombre: "Santiago del Estero",
                departamentos: ["Aguirre", "Alberdi", "Atamisqui", "Avellaneda", "Banda", "Belgrano", "Capital", "Choya", "Copo", "Figueroa", "General Taboada", "Guasayán", "Jiménez", "Juan Felipe Ibarra", "Loreto", "Mitre", "Moreno", "Ojo de Agua", "Pellegrini", "Quebrachos", "Río Hondo", "Rivadavia", "Robles", "Salavina", "San Martín", "Sarmiento", "Silípica"]
            },
            
            tierra_fuego: {
                nombre: "Tierra del Fuego",
                departamentos: ["Ushuaia", "Río Grande", "Tolhuin", "Antártida Argentina"]
            },
            
            tucuman: {
                nombre: "Tucumán",
                departamentos: ["Burruyacú", "Capital", "Chicligasta", "Cruz Alta", "Famaillá", "Graneros", "Juan Bautista Alberdi", "La Cocha", "Leales", "Lules", "Monteros", "Río Chico", "Simoca", "Tafí del Valle", "Tafí Viejo", "Trancas", "Yerba Buena"]
            }
        };

        // Función para verificar si todos los campos están completos
        function verificarCampos() {
            const edad = document.getElementById('edad').value;
            const provincia = document.getElementById('provincia').value;
            const departamento = document.getElementById('departamento').value;
            const localidad = document.getElementById('localidad');
            
            let camposCompletos = edad && provincia && departamento;
            
            // Si es San Luis, también verificar la localidad
            if (provincia === 'san_luis' && localidad) {
                camposCompletos = camposCompletos && localidad.value;
            }
            
            document.getElementById('continueBtn').disabled = !camposCompletos;
        }

        // Configurar event listeners para los campos
        document.getElementById('edad').addEventListener('change', verificarCampos);
        document.getElementById('provincia').addEventListener('change', function() {
            const provinciaId = this.value;
            const departamentoSelect = document.getElementById('departamento');
            const localidadGroup = document.getElementById('localidadGroup');
            const seccionInfo = document.getElementById('seccionInfo');
            
            // Resetear
            departamentoSelect.innerHTML = '<option value="">Seleccionar...</option>';
            departamentoSelect.disabled = true;
            localidadGroup.style.display = 'none';
            seccionInfo.style.display = 'none';
            
            if (provinciaId && ubicaciones[provinciaId]) {
                departamentoSelect.disabled = false;
                
                // Cargar departamentos
                ubicaciones[provinciaId].departamentos.forEach(depto => {
                    const option = document.createElement('option');
                    option.value = depto;
                    option.textContent = depto;
                    departamentoSelect.appendChild(option);
                });
                
                // Mostrar grupo de localidad solo para San Luis
                if (provinciaId === 'san_luis') {
                    localidadGroup.style.display = 'block';
                }
            }
            
            verificarCampos();
        });

        document.getElementById('departamento').addEventListener('change', function() {
            const provinciaId = document.getElementById('provincia').value;
            const departamento = this.value;
            const localidadSelect = document.getElementById('localidad');
            const seccionInfo = document.getElementById('seccionInfo');
            const partidosList = document.getElementById('partidosList');
            
            // Resetear
            localidadSelect.disabled = true;
            seccionInfo.style.display = 'none';
            
            if (provinciaId && departamento) {
                // Cargar localidades para San Luis
                if (provinciaId === 'san_luis' && ubicaciones[provinciaId].localidades[departamento]) {
                    localidadSelect.innerHTML = '<option value="">Seleccionar localidad...</option>';
                    localidadSelect.disabled = false;
                    
                    ubicaciones[provinciaId].localidades[departamento].forEach(localidad => {
                        const option = document.createElement('option');
                        option.value = localidad;
                        option.textContent = localidad;
                        localidadSelect.appendChild(option);
                    });
                }
                
                // Mostrar info de secciones para Buenos Aires
                if (provinciaId === 'buenos_aires' && ubicaciones[provinciaId].secciones[departamento]) {
                    seccionInfo.style.display = 'block';
                    partidosList.innerHTML = '';
                    
                    const ul = document.createElement('ul');
                    ubicaciones[provinciaId].secciones[departamento].forEach(partido => {
                        const li = document.createElement('li');
                        li.textContent = partido;
                        ul.appendChild(li);
                    });
                    partidosList.appendChild(ul);
                }
            }
            
            verificarCampos();
        });

        document.getElementById('localidad').addEventListener('change', verificarCampos);

        function irACalculadora() {
            const edad = document.getElementById('edad').value;
            const provincia = document.getElementById('provincia').value;
            const departamento = document.getElementById('departamento').value;
            const localidad = document.getElementById('localidad').value || '';
            
            if (!edad || !provincia || !departamento) {
                alert("¡Completá todos los campos para continuar!");
                return;
            }
            
            // Guardar en localStorage para usar en la próxima página
            localStorage.setItem('ubicacion', JSON.stringify({
                provincia: provincia,
                departamento: departamento,
                localidad: localidad
            }));
            
            window.location.href = edad + ".html";
        }
        
        // Enter key support
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                irACalculadora();
            }
        });
    </script>
</body>
</html>
